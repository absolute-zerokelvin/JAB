<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Story of the Temples of Delwädä</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #374151;
            line-height: 1.6;
        }

        /* --- Tab Styles --- */
        .tabs-container {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            background-color: #ffffff;
            padding: 0.5rem;
            border-radius: 9999px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            color: #4b5563;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            outline: none;
            border: none;
            white-space: nowrap;
        }

        .tab-button.active {
            background-color: #047857;
            color: #ffffff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tab-button:hover:not(.active) {
            background-color: #e0e7ff;
            color: #047857;
        }

        .tab-content {
            display: none;
            padding: 1.5rem;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .tab-content.active {
            display: block;
        }

        /* --- Story Enhancement Styles --- */
        .highlight {
            background-color: #fef9c3;
            color: #78350f;
            font-weight: 600;
            padding: 2px 5px;
            border-radius: 4px;
        }

        .story-icon {
            display: inline-block;
            width: 1.2em;
            height: 1.2em;
            vertical-align: -0.25em;
            margin-right: 0.25em;
            fill: currentColor;
        }
        
        .story-section-divider {
            border: 0;
            height: 2px;
            background-image: linear-gradient(to right, rgba(4, 120, 87, 0), rgba(4, 120, 87, 0.75), rgba(4, 120, 87, 0));
            margin: 2.5rem auto;
        }

        /* --- Graphics Tab Styles --- */
        .graphic-novel-panel {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }
        .graphic-novel-panel img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background-color: #e5e7eb;
        }
        .graphic-novel-caption {
            padding: 1rem;
            background-color: #ffffff;
            border-top: 1px solid #e5e7eb;
            flex-grow: 1;
        }
        .graphic-novel-caption .dialogue {
            font-style: italic;
            color: #1f2937;
            background-color: #f0fdfa;
            padding: 0.5rem;
            border-left: 3px solid #059669;
            border-radius: 4px;
            margin-top: 0.5rem;
        }

        /* --- Timeline Specific Styles --- */
        .timeline-container {
            position: relative;
            max-width: 100%;
            margin: 0 auto;
            padding: 20px 0;
        }

        .timeline-container::after {
            content: '';
            position: absolute;
            width: 4px;
            background-color: #059669;
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -2px;
            z-index: 0;
            border-radius: 9999px;
        }

        .timeline-event {
            padding: 20px 30px;
            position: relative;
            background-color: inherit;
            width: 50%;
            margin-bottom: 30px;
            box-sizing: border-box;
            z-index: 1;
        }

        .timeline-event.left { left: 0; padding-right: 60px; }
        .timeline-event.right { left: 50%; padding-left: 60px; }

        .timeline-event::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #059669;
            border: 4px solid #047857;
            top: 20px;
            border-radius: 50%;
            z-index: 1;
        }

        .timeline-event.left::after { right: -10px; transform: translateX(50%); }
        .timeline-event.right::after { left: -10px; transform: translateX(-50%); }

        .timeline-content {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .timeline-event.left .timeline-content::before {
            content: ''; position: absolute; top: 25px; right: -15px;
            border-width: 15px 0 15px 15px; border-style: solid;
            border-color: transparent transparent transparent #ffffff;
        }

        .timeline-event.right .timeline-content::before {
            content: ''; position: absolute; top: 25px; left: -15px;
            border-width: 15px 15px 15px 0; border-style: solid;
            border-color: transparent #ffffff transparent transparent;
        }

        .timeline-era {
            text-align: center; margin: 40px 0; position: relative; z-index: 2;
        }

        .timeline-era h2 {
            background-color: #047857; color: #ffffff; display: inline-block;
            padding: 10px 20px; border-radius: 9999px; font-weight: 700;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* --- Mind Map (v1) Specific Styles --- */
        .mind-map-wrapper { overflow-x: auto; padding-bottom: 1rem; }
        .mind-map-container { display: flex; flex-direction: column; align-items: flex-start; padding: 2rem; min-width: fit-content; }
        .mind-map-node {
            background-color: #ecfdf5; border: 2px solid #059669; border-radius: 8px;
            padding: 0.5rem 1rem; margin: 0.3rem 0; font-weight: 500; text-align: left;
            position: relative; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            width: fit-content; white-space: nowrap; color: #10b981; transition: all 0.2s ease;
        }
        .mind-map-node.main {
            background-color: #047857; color: #ffffff; font-size: 1.5rem;
            padding: 1rem 2rem; border-radius: 9999px; margin-bottom: 1.5rem;
            align-self: center; font-weight: 700;
        }
        .mind-map-sub-branches {
            display: flex; flex-direction: column; align-items: flex-start;
            margin-left: 2rem; padding-left: 0.5rem; border-left: 2px solid #9ca3af;
            margin-top: 0.5rem; margin-bottom: 0.5rem;
        }
        .mind-map-sub-branches.hidden { display: none; }
        .toggle-node { cursor: pointer; }
        .toggle-node .toggle-icon { margin-left: 0.5rem; font-weight: 700; }
        
        /* --- Mind Map (v2) Specific Styles --- */
        .mind-map-wrapper-v2 { overflow-x: auto; padding: 1rem; min-height: 400px; }
        .mind-map-container-v2 { display: flex; align-items: center; min-width: fit-content; position: relative; padding: 20px; }
        .mind-map-node-v2 {
            background-color: #ecfdf5; border: 2px solid #059669; border-radius: 12px;
            padding: 0.75rem 1.25rem; margin: 0.5rem; font-weight: 600; text-align: center;
            position: relative; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            white-space: nowrap; flex-shrink: 0;
        }
        .mind-map-node-v2.main {
            background-color: #047857; color: #ffffff; font-size: 1.5rem;
            padding: 1rem 2rem; border-radius: 9999px; margin-right: 3rem; z-index: 1;
        }
        .main-branches-container { display: flex; align-items: flex-start; position: relative; flex-grow: 1; }
        .branch-group {
            display: flex; flex-direction: column; align-items: center; position: relative;
            flex-shrink: 0; margin: 0 1rem;
        }
        .node-wrapper { display: flex; align-items: center; cursor: pointer; }
        .toggle-icon-v2 { font-size: 1.2rem; font-weight: bold; margin-left: 0.5rem; color: #047857; }
        .sub-branches-v2 {
            display: flex; flex-direction: column; align-items: center;
            margin-top: 0.5rem; position: relative;
        }
        .sub-branches-v2.hidden { display: none; }

        /* --- Quiz Tab Specific Styles --- */
        .quiz-container { padding: 1rem; }
        .quiz-question {
            background-color: #ecfdf5; border: 1px solid #d1fae5; border-radius: 8px;
            padding: 1rem 1.5rem; margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .quiz-question p { font-size: 1.1rem; font-weight: 500; color: #059669; margin-bottom: 0.75rem; }
        .show-answer-btn {
            background-color: #047857; color: white; padding: 0.5rem 1rem; border-radius: 9999px;
            border: none; cursor: pointer; font-size: 0.9rem; transition: background-color 0.2s ease;
            margin-top: 0.5rem;
        }
        .show-answer-btn:hover { background-color: #059669; }
        .quiz-answer {
            margin-top: 0.75rem; padding: 0.75rem 1rem; background-color: #d1fae5;
            border-left: 4px solid #047857; border-radius: 4px; font-weight: 600;
            color: #047857; display: none;
        }

        /* Responsive design */
        @media screen and (max-width: 768px) {
            .timeline-container::after { left: 20px; margin-left: 0; }
            .timeline-event { width: 100%; padding-left: 60px; padding-right: 15px; left: 0 !important; }
            .timeline-event.left::after, .timeline-event.right::after { left: 10px; transform: translateX(0); }
            .timeline-event.left .timeline-content::before, .timeline-event.right .timeline-content::before {
                left: 45px; border-width: 15px 15px 15px 0; border-color: transparent #ffffff transparent transparent;
            }
            .tabs-container { flex-wrap: wrap; padding: 0.25rem; gap: 0.5rem; }
            .tab-button { padding: 0.5rem 1rem; font-size: 0.875rem; }
            .mind-map-wrapper, .mind-map-wrapper-v2 { overflow-x: auto; }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <header class="bg-emerald-700 text-white p-6 text-center shadow-lg rounded-b-xl mb-8">
        <h1 class="text-4xl font-bold mb-2">The Temples of Delwädä</h1>
        <p class="text-emerald-200 text-lg">Section I.3 from JAB Manual 5th edition 2024</p>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="tabs-container">
            <button class="tab-button active" onclick="openTab(event, 'original-story')">The Story</button>
            <button class="tab-button" onclick="openTab(event, 'timeline-tab')">Timeline</button>
            <button class="tab-button" onclick="openTab(event, 'mindmap-v1-tab')">Mind Map (v1)</button>
            <button class="tab-button" onclick="openTab(event, 'mindmap-v2-tab')">Mind Map (v2)</button>
            <button class="tab-button" onclick="openTab(event, 'graphics-tab')">Graphics</button>
            <button class="tab-button" onclick="openTab(event, 'characters-tab')">Characters</button>
            <button class="tab-button" onclick="openTab(event, 'quiz-tab')">Quiz</button>
        </div>

        <!-- Story Tab Content -->
        <div id="original-story" class="tab-content active text-justify">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">The Story of the Delwädä Temples</h2>
            <div class="prose max-w-none">
                <p>
                    <svg class="story-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" /></svg>
                    On <span class="highlight">Mount Äbu</span> in Rajasthan stand two magnificent Jain temples known as the <span class="highlight">Delwädä Temples</span>. Their intricate marble carvings are so breathtaking they are called “poetry in marble.” The first was built by <span class="highlight">Vimalshä</span> in the 11th century, and the second, <span class="highlight">Lunaga Vasahi</span>, by two brothers, <span class="highlight">Vastupäl and Tejpäl</span>, in the 13th century.
                </p>
                <hr class="story-section-divider">
                <h3 class="text-2xl font-semibold text-emerald-600 mb-4">I.3.1. Vimalshä</h3>
                <p>
                    <span class="highlight">Vimalshä</span> was a capable and outstanding commander during the Solanki dynasty's golden period in Gujarat. As a young man, he was known for his skill in horseback riding and archery. He and his intelligent brother <span class="highlight">Nedh</span> joined the service of <span class="highlight">King Bhimdev</span> in the capital city of Pätan. Nedh became a chancellor, and Vimal became a commander, marrying a beautiful woman named <span class="highlight">Shridevi</span>.
                </p>
                <p>
                    Some courtiers grew jealous of Vimalshä's success. They noticed he would only bow to the Tirthankars before anyone else, even the king. They poisoned the king's mind, telling him Vimalshä was arrogant and might even try to take the throne. Growing suspicious, King Bhimdev turned against Vimalshä.
                </p>
                <p>
                    Feeling the king's distrust, Vimalshä left Pätan and went to Mount Äbu (then called Chandraväti). There, he defeated the local chief, <span class="highlight">Dhandhuk</span>, who was trying to rebel against King Bhimdev. Vimalshä took control of the region in the king's name, acting as its governor.
                </p>
                <p>
                    <svg class="story-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13.25a.75.75 0 00-1.5 0v6.5a.75.75 0 001.5 0v-6.5zM10 12a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd" /></svg>
                    Vimalshä and his wife had no children. He met a Jain Ächärya, <span class="highlight">Dharmaghosh-suri</span>, and felt deep remorse for the violence in his past wars. The Ächärya advised him to build a temple to atone for his sins. Vimalshä also prayed to the goddess <span class="highlight">Ambikä Devi</span>, who offered him a choice: a son, or the ability to build a great temple. <span class="highlight">Vimalshä chose the temple.</span>
                </p>
                <p>
                    The project was immense. It took <span class="highlight">14 years</span> and cost a fortune. Artisans were brought from far away, and there wasn't even a road up the mountain. Vimalshä famously paid the sculptors in gold equal to the weight of the marble dust they carved each day. The result was a temple of such exquisite beauty that it is considered a world wonder.
                </p>
                 <hr class="story-section-divider">
                <h3 class="text-2xl font-semibold text-emerald-600 mb-4">I.3.2. Vastupäl and Tejpäl</h3>
                <p>
                    Two brothers, <span class="highlight">Vastupäl and Tejpäl</span>, were faithful ministers to King Vir-Dhaval of Gujarat. Tejpäl's wife, <span class="highlight">Anupamä-devi</span>, was a wise and religious woman whose opinion he greatly respected.
                </p>
                <p>
                    Once, while on a pilgrimage, the brothers decided to bury their wealth to keep it safe from robbers. As they were digging, they discovered <span class="highlight">a huge pot of jewels and coins</span>. Unsure what to do with the unexpected treasure, Tejpäl asked his wife.
                </p>
                <p>
                    <svg class="story-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10 9a3 3 0 100-6 3 3 0 000 6zM10 11a6 6 0 016 6H4a6 6 0 016-6z" /></svg>
                    Anupamä-devi wisely replied that wealth from a deep trench should be placed on a high mountain to spread the glory of Jainism. Taking her advice, the brothers decided to use the treasure to build the second great temple on Mount Äbu, the <span class="highlight">Lunaga Vasahi Temple</span>. In this temple, Tejpäl dedicated two special niches, known as <span class="highlight">“Deräni-Jethäni nä Gokhla,”</span> to commemorate his wife and his sister-in-law.
                </p>
            </div>
        </div>

        <!-- Timeline Tab Content -->
        <div id="timeline-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Timeline of Events</h2>
            <div id="timeline" class="timeline-container"></div>
        </div>
        
        <!-- Mind Map v1 Tab Content -->
        <div id="mindmap-v1-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Interactive Mind Map (Vertical)</h2>
            <div id="mindmap-v1-container" class="mind-map-wrapper"></div>
        </div>
        
        <!-- Mind Map v2 Tab Content -->
        <div id="mindmap-v2-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Interactive Mind Map (Horizontal)</h2>
            <div id="mindmap-v2-container" class="mind-map-wrapper-v2"></div>
        </div>
        
        <!-- Graphics Tab Content -->
        <div id="graphics-tab" class="tab-content">
             <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Graphic Novel</h2>
             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Panel 1: Jealousy in the Court -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/fef2f2/b91c1c?text=Courtiers+whisper+to+King" alt="Jealous courtiers whisper to King Bhimdev, pointing at Vimalshä.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">Jealousy at Court</p>
                        <p class="text-sm">Courtiers, envious of Vimalshä's success, tell King Bhimdev that Vimalshä is arrogant and a threat to the throne.</p>
                    </div>
                </div>
                <!-- Panel 2: The Goddess's Choice -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/f5f3ff/6d28d9?text=Vimalshä+before+Ambikä+Devi" alt="Vimalshä kneels before the glowing goddess Ambikä Devi.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">A Fateful Choice</p>
                        <p class="text-sm">The goddess Ambikä Devi offers Vimalshä a choice: a son, or the ability to build a great temple. He chooses the temple.</p>
                    </div>
                </div>
                <!-- Panel 3: Poetry in Marble -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/f0fdf4/059669?text=Artisans+carving+marble" alt="Artisans carefully carve intricate details into the marble ceilings of the Delwädä temple.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">Poetry in Marble</p>
                        <p class="text-sm">For 14 years, the finest sculptors create breathtakingly intricate carvings. Vimalshä pays them in gold equal to the weight of the marble dust they produce.</p>
                    </div>
                </div>
                <!-- Panel 4: Found Treasure -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/fffbeb/d97706?text=Brothers+find+pot+of+gold" alt="Vastupäl and Tejpäl look amazed as they unearth a large pot filled with gold coins and jewels.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">A Hidden Treasure</p>
                        <p class="text-sm">While trying to hide their own wealth, the brothers Vastupäl and Tejpäl discover a massive hidden treasure.</p>
                    </div>
                </div>
                 <!-- Panel 5: Wise Counsel -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/f0f9ff/0284c7?text=Anupamä-devi+advises+Tejpäl" alt="Anupamä-devi wisely speaks to her husband Tejpäl.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">A Wife's Wisdom</p>
                        <p class="text-sm">Tejpäl's wife, Anupamä-devi, gives him profound advice on what to do with the newfound wealth.</p>
                        <p class="dialogue">Anupamä-devi: "This wealth came from a deep trench, but the right place for it is on a high mountain."</p>
                    </div>
                </div>
                <!-- Panel 6: The Second Temple -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/ecfdf5/047857?text=The+Lunaga+Vasahi+Temple" alt="The completed Lunaga Vasahi temple stands magnificently on Mount Äbu.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">Lunaga Vasahi</p>
                        <p class="text-sm">Inspired by the advice, the brothers build the second great temple at Delwädä, with special niches to honor their wives.</p>
                    </div>
                </div>
             </div>
        </div>

        <!-- Characters Tab Content -->
        <div id="characters-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Cast of Characters</h2>
            <div id="characters" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>
        
        <!-- Quiz Tab Content -->
        <div id="quiz-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Test Your Knowledge!</h2>
            <div id="quiz-container" class="quiz-container"></div>
        </div>

    </main>

    <footer class="bg-emerald-700 text-white text-center p-4 mt-12 rounded-t-xl">
        <p>&copy; 2025 AI Story Generator. All rights reserved.</p>
    </footer>

    <script>
        // --- DATA PLACEHOLDERS ---
        const timelineData = [{"era":"The Rise of Vimalshä","period":"11th Century A.D.","events":[{"title":"Early Life","description":"Vimal and his brother Nedh are raised by their mother. Vimal becomes an expert archer and equestrian, while Nedh becomes a wise scholar.","characters":["Vimalshä","Nedh"]},{"title":"Success in Pätan","description":"The brothers move to the capital city of Pätan. Vimal joins the army and Nedh joins the royal court. Under King Bhimdev, Vimal becomes a commander and Nedh a chancellor.","characters":["Vimalshä","Nedh","King Bhimdev"]},{"title":"Jealousy and Exile","description":"Jealous courtiers make King Bhimdev suspicious of Vimalshä. To escape the king's distrust, Vimalshä leaves Pätan for Mount Äbu.","characters":["Vimalshä","King Bhimdev"]}]},{"era":"The First Delwädä Temple","period":"11th Century A.D.","events":[{"title":"A Vow for a Temple","description":"Feeling remorse for past violence, Vimalshä is advised by Ächärya Dharmaghosh-suri to build a temple. He chooses this sacred task over having a son when offered a choice by the goddess Ambikä Devi.","characters":["Vimalshä","Dharmaghosh-suri","Ambikä Devi"]},{"title":"Construction Begins","description":"Vimalshä buys land and begins the difficult 14-year project, bringing marble and artisans from far away to the top of the mountain.","characters":["Vimalshä"]},{"title":"Temple Completion","description":"The magnificent temple, the first at Delwädä, is completed at a cost of 185,300,000 gold coins. Its carvings are considered a wonder of the world.","characters":["Vimalshä","Dharmaghosh-suri"]}]},{"era":"Vastupäl, Tejpäl, and the Second Temple","period":"13th Century A.D.","events":[{"title":"The Two Brothers","description":"Vastupäl and Tejpäl are faithful ministers serving King Vir-Dhaval in Gujarat.","characters":["Vastupäl","Tejpäl","King Vir-Dhaval"]},{"title":"A Fortunate Discovery","description":"While on a pilgrimage, the brothers try to bury their wealth for safety but instead unearth a huge pot of treasure.","characters":["Vastupäl","Tejpäl"]},{"title":"A Wife's Wise Counsel","description":"Unsure what to do, Tejpäl asks his wise wife, Anupamä-devi. She advises that the wealth from the earth should be used to build something high on a mountain.","characters":["Tejpäl","Anupamä-devi"]},{"title":"Lunaga Vasahi is Built","description":"Inspired, the brothers build the second Delwädä temple, Lunaga Vasahi, in memory of their elder brother. It includes niches called 'Deräni-Jethäni nä Gokhla' to honor their wives.","characters":["Vastupäl","Tejpäl","Anupamä-devi"]}]}]
        const charactersData = [{"name":"Vimalshä","description":"A brave and capable commander under King Bhimdev. He built the first, incredibly ornate Delwädä temple on Mount Äbu to atone for sins committed in war."},{"name":"Vastupäl & Tejpäl","description":"Two brothers who served as ministers in Gujarat. After discovering a hidden treasure, they used it to build the second Delwädä temple, Lunaga Vasahi."},{"name":"Anupamä-devi","description":"The wise and religious wife of Tejpäl. It was her suggestion to use the found treasure to build a temple on a mountain, leading to the creation of Lunaga Vasahi."},{"name":"King Bhimdev","description":"The king of the Solanki dynasty in Gujarat. He initially favored Vimalshä but grew suspicious due to the lies of jealous courtiers."},{"name":"Shridevi","description":"Vimalshä's beautiful and affectionate wife."},{"name":"Dharmaghosh-suri","description":"The Jain Ächärya who saw Vimalshä's genuine repentance and advised him to build a temple."},{"name":"Ambikä Devi","description":"The goddess who granted Vimalshä's wish to build a temple, forcing him to choose it over having a son."}]
        const quizData = [{"question":"Who built the first temple at Delwädä?","answer":"Vimalshä"},{"question":"Who built the second temple, known as Lunaga Vasahi?","answer":"The brothers Vastupäl and Tejpäl."},{"question":"Why did Vimalshä leave the court of King Bhimdev?","answer":"Because jealous courtiers made the king suspicious of him."},{"question":"When given a choice by the goddess Ambikä Devi, what did Vimalshä choose instead of a son?","answer":"The ability to build a great temple."},{"question":"How long did it take to build Vimalshä's temple?","answer":"14 years."},{"question":"How did Vastupäl and Tejpäl get the wealth to build the second temple?","answer":"They unearthed a large pot of jewels and coins while trying to bury their own wealth."},{"question":"Whose idea was it to use the found treasure to build a temple on a mountain?","answer":"Anupamä-devi, Tejpäl's wife."},{"question":"What are the niches dedicated to the ministers' wives in the second temple called?","answer":"Deräni-Jethäni nä Gokhla."},{"question":"The Delwädä temples are often described as...","answer":"'Poetry in marble'."},{"question":"In which mountain range are the Delwädä temples located?","answer":"Mount Äbu."}]
        const mindmapV1Data = {"name":"Temples of Delwädä","children":[{"name":"Vimalshä's Temple (11th Century)","children":[{"name":"Vimalshä's Rise","children":[{"name":"Commander under King Bhimdev"},{"name":"Jealousy & Exile to Mt. Äbu"}]},{"name":"The Vow","children":[{"name":"Advised by Dharmaghosh-suri"},{"name":"Choice from Ambikä Devi: Temple over Son"}]},{"name":"Construction","children":[{"name":"14 Years to build"},{"name":"Exquisite Marble Carvings"},{"name":"Paid artisans in gold"}]}]},{"name":"Lunaga Vasahi Temple (13th Century)","children":[{"name":"Vastupäl & Tejpäl","children":[{"name":"Ministers for King Vir-Dhaval"}]},{"name":"The Treasure","children":[{"name":"Found a pot of jewels while digging"}]},{"name":"The Idea","children":[{"name":"Anupamä-devi's wise advice"},{"name":"'Wealth from trench belongs on mountain'"}]},{"name":"Construction","children":[{"name":"Built in memory of elder brother"},{"name":"Includes 'Deräni-Jethäni nä Gokhla'"}]}]}]}
        const mindmapV2Data = {"name":"Delwädä Temples","children":[{"name":"First Temple: Vimalshä","children":[{"name":"The Builder","children":["Commander","Exiled by King Bhimdev"]},{"name":"The Mission","children":["Advised by a Guru","Chose Temple over Son"]},{"name":"The Masterpiece","children":["14-year construction","'Poetry in Marble'"]}]},{"name":"Second Temple: The Brothers","children":[{"name":"The Builders","children":["Vastupäl & Tejpäl","Ministers"]},{"name":"The Funding","children":["Found hidden treasure"]},{"name":"The Inspiration","children":["Anupamä-devi's wisdom"]},{"name":"The Memorial","children":["Honors their brother & wives"]}]}]}

        // --- Tab Functionality ---
        function openTab(evt, tabName) {
            let i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = "none"; }
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(" active", ""); }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }
        
        // --- DYNAMIC CONTENT GENERATION ---
        document.addEventListener('DOMContentLoaded', () => {

            // Generate Timeline
            const generateTimeline = () => {
                const timelineDiv = document.getElementById('timeline');
                if (!timelineDiv || !timelineData.length) return;
                timelineDiv.innerHTML = '';
                let isLeft = true;
                timelineData.forEach(era => {
                    const eraHeading = document.createElement('div');
                    eraHeading.className = 'timeline-era';
                    eraHeading.innerHTML = `<h2 class="text-xl md:text-2xl">${era.era}<br><span class="text-sm font-normal">${era.period}</span></h2>`;
                    timelineDiv.appendChild(eraHeading);
                    if (era.events) era.events.forEach(event => {
                        const eventDiv = document.createElement('div');
                        eventDiv.className = `timeline-event ${isLeft ? 'left' : 'right'}`;
                        isLeft = !isLeft;
                        const charactersHtml = event.characters?.length ? `<p class="text-sm text-gray-600 mt-2"><strong>Characters:</strong> ${event.characters.join(', ')}</p>` : '';
                        eventDiv.innerHTML = `<div class="timeline-content"><h3 class="text-xl font-semibold text-emerald-700 mb-2">${event.title}</h3><p>${event.description}</p>${charactersHtml}</div>`;
                        timelineDiv.appendChild(eventDiv);
                    });
                });
            };

            // Generate Characters
            const generateCharacters = () => {
                const charactersDiv = document.getElementById('characters');
                if (!charactersDiv || !charactersData.length) return;
                charactersDiv.innerHTML = '';
                charactersData.forEach(character => {
                    const card = document.createElement('div');
                    card.className = 'bg-gray-50 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300';
                    card.innerHTML = `<h3 class="text-xl font-bold text-emerald-800 mb-2">${character.name}</h3><p class="text-gray-700 text-sm">${character.description}</p>`;
                    charactersDiv.appendChild(card);
                });
            };

            // Generate Quiz
            const generateQuiz = () => {
                const quizContainer = document.getElementById('quiz-container');
                if (!quizContainer || !quizData.length) return;
                quizContainer.innerHTML = '';
                quizData.forEach((item, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question';
                    questionDiv.innerHTML = `<p>${index + 1}. ${item.question}</p><button class="show-answer-btn" onclick="toggleAnswer(this)">Show Answer</button><div class="quiz-answer">${item.answer}</div>`;
                    quizContainer.appendChild(questionDiv);
                });
            };
            
            // Generate Mind Map v1 (Vertical)
            const generateMindmapV1 = () => {
                const container = document.getElementById('mindmap-v1-container');
                if (!container || !mindmapV1Data?.name) return;
                container.innerHTML = '';
                const mapContainer = document.createElement('div');
                mapContainer.className = 'mind-map-container';
                
                function createNodeV1(item) {
                    const nodeGroup = document.createElement('div');
                    const node = document.createElement('div');
                    node.className = 'mind-map-node';
                    node.textContent = item.name;
                    
                    if (item.children && item.children.length > 0) {
                        node.classList.add('toggle-node');
                        node.innerHTML = `${item.name} <span class="toggle-icon">+</span>`;
                        const subBranches = document.createElement('div');
                        subBranches.className = 'mind-map-sub-branches hidden';
                        item.children.forEach(child => subBranches.appendChild(createNodeV1(child)));
                        nodeGroup.appendChild(node);
                        nodeGroup.appendChild(subBranches);
                        
                        node.addEventListener('click', () => {
                            subBranches.classList.toggle('hidden');
                            node.querySelector('.toggle-icon').textContent = subBranches.classList.contains('hidden') ? '+' : '-';
                        });
                    } else {
                        nodeGroup.appendChild(node);
                    }
                    return nodeGroup;
                }

                const mainNode = document.createElement('div');
                mainNode.className = 'mind-map-node main';
                mainNode.textContent = mindmapV1Data.name;
                mapContainer.appendChild(mainNode);
                
                if (mindmapV1Data.children) {
                    const mainBranches = document.createElement('div');
                    mindmapV1Data.children.forEach(child => mainBranches.appendChild(createNodeV1(child)));
                    mapContainer.appendChild(mainBranches);
                }
                container.appendChild(mapContainer);
            };

            // Generate Mind Map v2 (Horizontal)
            const generateMindmapV2 = () => {
                const container = document.getElementById('mindmap-v2-container');
                if (!container || !mindmapV2Data?.name) return;
                container.innerHTML = '';
                const mapContainer = document.createElement('div');
                mapContainer.className = 'mind-map-container-v2';
                
                function createNodeV2(item) {
                    const branchGroup = document.createElement('div');
                    branchGroup.className = 'branch-group';
                    const nodeWrapper = document.createElement('div');
                    nodeWrapper.className = 'node-wrapper';

                    const node = document.createElement('div');
                    node.className = 'mind-map-node-v2';
                    node.textContent = item.name;
                    nodeWrapper.appendChild(node);
                    branchGroup.appendChild(nodeWrapper);

                    if (item.children && item.children.length > 0) {
                        const toggleIcon = document.createElement('span');
                        toggleIcon.className = 'toggle-icon-v2';
                        toggleIcon.textContent = '+';
                        nodeWrapper.appendChild(toggleIcon);

                        const subBranches = document.createElement('div');
                        subBranches.className = 'sub-branches-v2 hidden';
                        item.children.forEach(child => subBranches.appendChild(createNodeV2(child)));
                        branchGroup.appendChild(subBranches);

                        nodeWrapper.addEventListener('click', () => {
                            subBranches.classList.toggle('hidden');
                            toggleIcon.textContent = subBranches.classList.contains('hidden') ? '+' : '-';
                        });
                    }
                    return branchGroup;
                }

                const mainNode = document.createElement('div');
                mainNode.className = 'mind-map-node-v2 main';
                mainNode.textContent = mindmapV2Data.name;
                mapContainer.appendChild(mainNode);
                
                if (mindmapV2Data.children) {
                    const mainBranchesContainer = document.createElement('div');
                    mainBranchesContainer.className = 'main-branches-container';
                    mindmapV2Data.children.forEach(child => mainBranchesContainer.appendChild(createNodeV2(child)));
                    mapContainer.appendChild(mainBranchesContainer);
                }
                container.appendChild(mapContainer);
            };

            // --- Quiz Answer Toggle Functionality ---
            window.toggleAnswer = function(button) {
                const answerDiv = button.nextElementSibling;
                if (answerDiv && answerDiv.classList.contains('quiz-answer')) {
                    const isVisible = answerDiv.style.display === 'block';
                    answerDiv.style.display = isVisible ? 'none' : 'block';
                    button.textContent = isVisible ? 'Show Answer' : 'Hide Answer';
                }
            };

            // --- INITIALIZATION ---
            generateTimeline();
            generateCharacters();
            generateQuiz();
            generateMindmapV1();
            generateMindmapV2();

            // Set the initial active tab
            document.querySelector('.tabs-container .tab-button').classList.add('active');
            document.getElementById('original-story').style.display = 'block';
        });
    </script>
</body>
</html>
