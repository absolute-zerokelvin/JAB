<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jainism Study Guide: Shad Dravya I: Jiva</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/main.css">

<style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .accordion-content, .qa-answer, .mindmap-children {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out;
        }
        .mindmap-children.expanded {
             max-height: 1500px; /* Adjust as needed */
        }
        /* Flashcard styles */
        .flashcard-container { perspective: 1000px; }
        .flashcard {
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        .flashcard.is-flipped {
            transform: rotateY(180deg);
        }
        .flashcard-face, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            text-align: center;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .flashcard-back {
            transform: rotateY(180deg);
        }
        .quiz-format-btn {
            padding: 0.5rem 1.5rem; font-weight: 600; border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out; border-width: 2px;
        }
        .active-quiz-btn { background-color: #2563eb; color: white; border-color: transparent; }
        .inactive-quiz-btn { background-color: white; color: #1d4ed8; border-color: #2563eb; }
        /* Mindmap lines */
        .mindmap-node { 
            position: relative; 
            margin-top: 0.5rem; /* Added margin for spacing */
            margin-bottom: 0.5rem; /* Added margin for spacing */
        }
        .mindmap-children { padding-left: 2rem; }
        .mindmap-node::before {
            content: '';
            position: absolute;
            top: 1.25rem;
            left: -1rem;
            width: 1rem;
            height: 1px;
            background-color: #9ca3af;
        }
         .mindmap-node .mindmap-node:not(:last-child)::after { /* Target only non-root nodes */
            content: '';
            position: absolute;
            top: 1.25rem;
            left: -1rem;
            width: 1px;
            height: 100%;
            background-color: #9ca3af;
        }
    </style>
</head>
<body class="bg-blue-50 text-gray-800">
    <div class="nav-overlay" id="navOverlay" onclick="toggleMobileNav()"></div>
    
    <!-- Added Mobile Navigation Toggle -->
    <button class="mobile-nav-toggle" onclick="toggleMobileNav()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </button>
    
    <!-- Added Desktop Navigation -->
    <div id="desktop-nav-container"></div>
    
    <!-- Added Mobile Navigation -->
    <div id="mobile-nav-container"></div>

    <div class="main-content">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-5xl font-bold text-blue-900">The Six Substances: Jiva</h1>
            <p class="text-lg md:text-xl text-blue-700 mt-2">An Interactive Study Guide for Section B.4</p>
        </header>

        <div class="mb-8 sticky top-2 z-10">
            <ul id="tabs" class="flex flex-wrap justify-center items-center gap-x-2 p-2 bg-white rounded-2xl shadow-md">
                <li><a href="#" class="tab-link active bg-blue-600 text-white rounded-full shadow-md px-4 py-2 font-semibold transition-colors duration-300" data-tab="reality">Jain Reality</a></li>
                <li><a href="#" class="tab-link text-blue-700 px-4 py-2 font-semibold transition-colors duration-300" data-tab="jiva-classification">Classification of Jiva</a></li>
                <li><a href="#" class="tab-link text-blue-700 px-4 py-2 font-semibold transition-colors duration-300" data-tab="chart">Shad Dravya Chart</a></li>
                <li><a href="#" class="tab-link text-blue-700 px-4 py-2 font-semibold transition-colors duration-300" data-tab="powers-vitalities">Powers & Vitalities</a></li>
                <li><a href="#" class="tab-link text-blue-700 px-4 py-2 font-semibold transition-colors duration-300" data-tab="realms">Four Realms</a></li>
                <li><a href="#" class="tab-link text-blue-700 px-4 py-2 font-semibold transition-colors duration-300" data-tab="quiz">Quiz</a></li>
            </ul>
        </div>

        <div id="tab-content" class="bg-white p-4 md:p-6 rounded-2xl shadow-lg border border-blue-200 min-h-[500px]">
            
            <div id="reality" class="tab-pane active">
                 <h2 class="text-2xl font-bold text-blue-800 mb-4">Jain Reality & The Six Substances</h2><p class="mb-4 text-center text-gray-700">Jainism states the universe is eternal, made of six fundamental substances (Shad Dravya). Reality itself is a combination of constant change and permanence.</p><div class="p-4 bg-blue-50 rounded-lg italic text-center text-blue-800 border-l-4 border-blue-500 mb-8"><p class="font-semibold">The Three Pronouncements (Tripadi)</p><p>"Uppannei vä, Vigamei vä, Dhuvei vä"</p><p class="text-sm not-italic mt-1">Appearance, Disappearance, and Permanence</p></div><h3 class="text-xl font-bold text-blue-900 mb-4 text-center">The Six Universal Substances (Shad Dravya)</h3><div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-8"><div class="p-4 bg-green-100 border-2 border-green-300 rounded-xl text-center"><h4 class="font-bold text-green-800">Jiva</h4><p class="text-sm text-green-700">(Living / Soul)</p></div><div class="p-4 bg-gray-100 border-2 border-gray-300 rounded-xl text-center"><h4 class="font-bold text-gray-800">Pudgalästikäy</h4><p class="text-sm text-gray-700">(Matter)</p></div><div class="p-4 bg-gray-100 border-2 border-gray-300 rounded-xl text-center"><h4 class="font-bold text-gray-800">Dharmästikäy</h4><p class="text-sm text-gray-700">(Medium of Motion)</p></div><div class="p-4 bg-gray-100 border-2 border-gray-300 rounded-xl text-center"><h4 class="font-bold text-gray-800">Adharmästikäy</h4><p class="text-sm text-gray-700">(Medium of Rest)</p></div><div class="p-4 bg-gray-100 border-2 border-gray-300 rounded-xl text-center"><h4 class="font-bold text-gray-800">Äkäshästikäy</h4><p class="text-sm text-gray-700">(Space)</p></div><div class="p-4 bg-gray-100 border-2 border-gray-300 rounded-xl text-center"><h4 class="font-bold text-gray-800">Käl</h4><p class="text-sm text-gray-700">(Time)</p></div></div><div class="pt-6 border-t border-blue-200"><h3 class="text-xl font-bold text-blue-900 mb-4 text-center">The Five Non-Living Substances (Ajiva)</h3><div id="ajiva-dravya-cards"></div></div>
            </div>

            <div id="jiva-classification" class="tab-pane hidden">
                <h2 class="text-2xl font-bold text-blue-800 mb-4">Classification of Jiva (Living Beings)</h2><p class="mb-6 text-gray-700">All souls (Jiva) are broadly classified based on their state of liberation and the number of senses they possess.</p><div class="text-center p-4 bg-blue-50 rounded-lg"><div class="p-3 bg-blue-800 text-white rounded-lg inline-block font-bold">Jiva (Soul)</div><div class="flex justify-center my-4"><div class="w-px h-8 bg-blue-300"></div></div><div class="flex justify-around"><div><div class="p-2 bg-purple-500 text-white rounded-lg inline-block">Liberated (Siddha)</div></div><div><div class="p-2 bg-yellow-500 text-white rounded-lg inline-block">Worldly (Sansäri)</div><div class="flex justify-center my-2"><div class="w-px h-6 bg-yellow-300"></div></div><div class="flex justify-around gap-4"><div><div class="p-2 bg-red-500 text-white rounded-lg inline-block">Immobile (Sthävar)</div></div><div><div class="p-2 bg-green-500 text-white rounded-lg inline-block">Mobile (Trasa)</div></div></div></div></div></div><div class="mt-8 pt-6 border-t border-blue-200"><h3 class="text-xl font-bold text-blue-900 mb-4 text-center">Immobile Beings (Sthävar Jiva) - One Sense (Touch)</h3><div id="sthavar-jiva-cards" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"></div></div><div class="mt-8 pt-6 border-t border-blue-200"><h3 class="text-xl font-bold text-blue-900 mb-4 text-center">Mobile Beings (Trasa Jiva) - Two to Five Senses</h3><div id="trasa-jiva-cards" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div></div>
            </div>

            <div id="chart" class="tab-pane hidden">
                <h2 class="text-2xl font-bold text-blue-800 mb-4">Interactive Shad Dravya Chart</h2>
                <div class="flex justify-between items-center mb-4">
                    <p class="text-gray-700">Click on any item with a <span class="font-mono font-bold">[+]</span> or <span class="font-mono font-bold">[-]</span> to expand or collapse the category.</p>
                    <div class="flex gap-2">
                        <button id="expand-all-btn" class="text-xs bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600 transition-colors">Expand All</button>
                        <button id="collapse-all-btn" class="text-xs bg-gray-500 text-white px-3 py-1 rounded-md hover:bg-gray-600 transition-colors">Collapse All</button>
                    </div>
                </div>
                <div id="mindmap-chart-container" class="p-4 bg-gray-50 rounded-lg text-sm">
                    <!-- Mindmap will be generated here by JS -->
                </div>
            </div>

            <div id="powers-vitalities" class="tab-pane hidden">
                <h2 class="text-2xl font-bold text-blue-800 mb-4">Paryäpti (Powers) and Prän (Vitalities)</h2><p class="mb-6 text-gray-700">Living beings possess bio-potential powers (Paryäpti) to develop their bodies and vitalities (Prän) essential for life. The number of these varies by the type of Jiva.</p><div class="grid md:grid-cols-2 gap-8"><div class="bg-blue-50 p-4 rounded-xl"><h3 class="text-xl font-bold text-blue-900 mb-4 text-center">The 6 Paryäpti (Powers)</h3><ul class="list-disc list-inside text-gray-700 space-y-1"><li><strong>Ähär:</strong> Ability to consume food</li><li><strong>Sharir:</strong> Ability to form a body</li><li><strong>Indriya:</strong> Ability to develop senses</li><li><strong>Shväso-chchhväs:</strong> Ability to respire</li><li><strong>Bhäsha:</strong> Ability to speak</li><li><strong>Mana:</strong> Ability to think</li></ul></div><div class="bg-blue-50 p-4 rounded-xl"><h3 class="text-xl font-bold text-blue-900 mb-4 text-center">The 10 Prän (Vitalities)</h3><ul class="list-disc list-inside text-gray-700 space-y-1"><li>5 Senses (Touch, Taste, Smell, Sight, Hearing)</li><li><strong>Mano-bal:</strong> Mind power</li><li><strong>Vachan-bal:</strong> Speech power</li><li><strong>Käya-bal:</strong> Body power</li><li><strong>Shväso-chchhväs:</strong> Respiration</li><li><strong>Äyushya:</strong> Longevity</li></ul></div></div><div class="mt-8 overflow-x-auto"><h3 class="text-xl font-bold text-blue-900 mb-4 text-center">Paryäpti & Prän per Jiva</h3><table class="w-full text-center"><thead class="bg-blue-200 text-blue-800"><tr><th class="p-2">Type of Jiva</th><th class="p-2">Senses</th><th class="p-2">Paryäpti</th><th class="p-2">Prän</th></tr></thead><tbody class="divide-y divide-blue-100"><tr class="bg-white"><td class="p-2 font-semibold">Ekendriya</td><td class="p-2">1</td><td class="p-2">4</td><td class="p-2">4</td></tr><tr class="bg-blue-50"><td class="p-2 font-semibold">Beindriya</td><td class="p-2">2</td><td class="p-2">5</td><td class="p-2">6</td></tr><tr class="bg-white"><td class="p-2 font-semibold">Teindriya</td><td class="p-2">3</td><td class="p-2">5</td><td class="p-2">7</td></tr><tr class="bg-blue-50"><td class="p-2 font-semibold">Chaurindriya</td><td class="p-2">4</td><td class="p-2">5</td><td class="p-2">8</td></tr><tr class="bg-white"><td class="p-2 font-semibold">Asangni Panchendriya</td><td class="p-2">5</td><td class="p-2">5</td><td class="p-2">9</td></tr><tr class="bg-blue-50"><td class="p-2 font-semibold">Sangni Panchendriya</td><td class="p-2">5</td><td class="p-2">6</td><td class="p-2">10</td></tr></tbody></table></div>
            </div>

            <div id="realms" class="tab-pane hidden">
                <h2 class="text-2xl font-bold text-blue-800 mb-4">The Four Realms of Life (Gati)</h2><p class="mb-6 text-gray-700">Due to karma, worldly souls are reborn into one of four realms. Only from a human life can a soul attain liberation.</p><div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6"><div class="p-6 bg-green-100 border-l-4 border-green-500 rounded-lg"><h3 class="text-xl font-bold text-green-800">Manushya Gati</h3><p class="font-semibold text-green-700">(Human Beings)</p><p class="mt-2 text-sm">Born here by being simple and compassionate. This is the only Gati from which liberation is possible.</p></div><div class="p-6 bg-yellow-100 border-l-4 border-yellow-500 rounded-lg"><h3 class="text-xl font-bold text-yellow-800">Dev Gati</h3><p class="font-semibold text-yellow-700">(Heavenly Beings)</p><p class="mt-2 text-sm">Born here by observing vows and penance. Life has luxury but is transient, and liberation is not possible.</p></div><div class="p-6 bg-orange-100 border-l-4 border-orange-500 rounded-lg"><h3 class="text-xl font-bold text-orange-800">Tiryancha Gati</h3><p class="font-semibold text-orange-700">(Animals, etc.)</p><p class="mt-2 text-sm">Born here by being deceptive and selfish. Cannot follow vows or progress spiritually.</p></div><div class="p-6 bg-red-100 border-l-4 border-red-500 rounded-lg"><h3 class="text-xl font-bold text-red-800">Näraki Gati</h3><p class="font-semibold text-red-700">(Infernal Beings)</p><p class="mt-2 text-sm">Born here due to violence, greed, and intense attachment. A life of continuous suffering.</p></div></div>
            </div>

            <div id="quiz" class="tab-pane hidden">
                 <h2 class="text-2xl font-bold text-blue-800 mb-2">Test Your Knowledge</h2><p class="mb-6 text-gray-600">Choose a format below to start the quiz.</p><div class="flex justify-center gap-4 mb-8"><button id="show-qa-btn-b4" class="quiz-format-btn active-quiz-btn">Q&A List</button><button id="show-flashcard-btn-b4" class="quiz-format-btn inactive-quiz-btn">Flashcards</button></div><div id="quiz-qa-section-b4"><h3 class="text-xl font-bold text-blue-900 mb-4">Quiz: Q&A Format</h3><div id="qa-list-b4" class="space-y-2"></div></div><div id="quiz-flashcard-section-b4" class="hidden"><h3 class="text-xl font-bold text-blue-900 mb-4 text-center">Quiz: Flashcard Format</h3><div class="max-w-xl mx-auto"><div class="flashcard-container h-64 mb-4"><div id="quiz-flashcard-b4" class="flashcard w-full h-full cursor-pointer"><div id="quiz-card-front-b4" class="flashcard-face bg-blue-500 text-white rounded-lg"></div><div id="quiz-card-back-b4" class="flashcard-back bg-blue-700 text-white rounded-lg"></div></div></div><div class="flex justify-between items-center"><button id="quiz-prev-btn-b4" class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed">Previous</button><div id="quiz-counter-b4" class="text-gray-700 font-semibold"></div><button id="quiz-next-btn-b4" class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition-colors">Next</button></div></div></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA ---
            const mindmapData = {
                name: 'Shad Dravya (Six Universal Substances)',
                children: [
                    {
                        name: '1. Jiva - Living Beings, Conscious, Soul, Chetan', color: 'green',
                        children: [
                            { name: 'Siddha Jiva - Liberated', color: 'purple' },
                            {
                                name: 'Sansäri Jiva - Non-Liberated', color: 'yellow',
                                children: [
                                    {
                                        name: 'Sthävar Jiva - Immobile', color: 'red',
                                        children: [
                                            { name: 'Prithvikäya - Earth Bodied' }, { name: 'Apkäya - Water Bodied' },
                                            { name: 'Teukäya - Fire Bodied' }, { name: 'Väyukäya - Air Bodied' },
                                            { name: 'Vanaspati-käya - Plant Bodied', children: [{ name: 'Pratyek Vanaspati Käya' }, { name: 'Sädhäran Vanaspati Käya' }] },
                                        ]
                                    },
                                    {
                                        name: 'Trasa Jiva: Mobile', color: 'blue',
                                        children: [
                                            { name: 'Beindriya - Two Sensed' }, { name: 'Teindriya - Three Sensed' },
                                            { name: 'Chaurindriya - Four Sensed' },
                                            {
                                                name: 'Panchendriya - Five Sensed', children: [
                                                    { name: 'Classification', children: [{ name: 'Sangni Panchendriya' }, { name: 'Asangni Panchendriya' }] },
                                                    { name: 'Types', children: [{ name: 'Manushya - Human' }, { name: 'Dev - Celestial' }, { name: 'Tiryancha - Animals' }, { name: 'Näraki - Infernal' }] }
                                                ]
                                            },
                                        ]
                                    },
                                ]
                            }
                        ]
                    },
                    {
                        name: 'Ajiva - Non-Living Objects, Unconscious, Achetan', color: 'gray',
                        children: [
                            { name: '2. Pudgal - Matter' }, { name: '3. Dharmästikäy - Medium of Motion' },
                            { name: '4. Adharmästikäy - Medium of Rest' }, { name: '5. Äkäshästikäy - Space' },
                            { name: '6. Käl / Samay - Time' }
                        ]
                    }
                ]
            };
            const colorClasses = { green: 'bg-green-100 border-green-500 text-green-800', gray: 'bg-gray-100 border-gray-500 text-gray-800', purple: 'bg-purple-100 border-purple-500 text-purple-800', yellow: 'bg-yellow-100 border-yellow-500 text-yellow-800', red: 'bg-red-100 border-red-500 text-red-800', blue: 'bg-blue-100 border-blue-500 text-blue-800', default: 'bg-white border-gray-400' };

            function buildMindmap(node, isRoot = false) {
                let childrenHtml = '';
                const hasChildren = node.children && node.children.length > 0;
                if (hasChildren) {
                    const expandedClass = isRoot ? 'expanded' : '';
                    childrenHtml = `<div class="mindmap-children ${expandedClass}">${node.children.map(child => buildMindmap(child)).join('')}</div>`;
                }
                const color = node.color || 'default';
                const nodeClasses = `mindmap-node-header flex items-center p-2 rounded-md border-l-4 ${hasChildren ? 'cursor-pointer' : ''} ${colorClasses[color]}`;
                const icon = hasChildren ? (isRoot ? '[-]' : '[+]') : '';

                return `
                    <div class="mindmap-node my-2">
                        <div class="${nodeClasses}" ${hasChildren ? 'data-toggle="mindmap"' : ''}>
                            <span class="font-semibold flex-grow">${node.name}</span>
                            ${icon ? `<span class="mindmap-icon font-mono font-bold text-lg ml-2">${icon}</span>` : ''}
                        </div>
                        ${childrenHtml}
                    </div>
                `;
            }

            const mindmapContainer = document.getElementById('mindmap-chart-container');
            if (mindmapContainer) { mindmapContainer.innerHTML = buildMindmap(mindmapData, true); }
            
            const ajivaDravya = [ { term: 'Dharmästikäy', def: 'Medium of Motion' }, { term: 'Adharmästikäy', def: 'Medium of Rest' }, { term: 'Äkäshästikäy', def: 'Space' }, { term: 'Pudgalästikäy', def: 'Matter' }, { term: 'Käl', def: 'Time' } ];
            const sthavarJiva = [ { term: 'Prithvikäya', def: 'Earth-bodied (sand, clay)' }, { term: 'Apkäya', def: 'Water-bodied (rain, fog)' }, { term: 'Teukäya', def: 'Fire-bodied (flames, lightning)' }, { term: 'Väyukäya', def: 'Air-bodied (wind, cyclones)' }, { term: 'Vanaspati-käya', def: 'Plant-bodied (trees, vegetables)' } ];
            const trasaJiva = [ { term: 'Beindriya', def: '2 Senses (Touch, Taste)' }, { term: 'Teindriya', def: '3 Senses (Touch, Taste, Smell)' }, { term: 'Chaurindriya', def: '4 Senses (Touch, Taste, Smell, Sight)' }, { term: 'Panchendriya', def: '5 Senses (Touch, Taste, Smell, Sight, Hearing)' } ];
            const quizDataB4 = [ { q: "What are the three components of Bhagawän Mahävir’s Three Pronouncements, or Tripadi?", a: "Appearance (Utpäd), Disappearance (Vyaya), and Permanence (Dhrauvya)." }, { q: "What is the collective name for the six fundamental substances of the universe?", a: "Shad Dravya." }, { q: "Which of the six universal substances is the only one considered living (Chetan)?", a: "Jiva (Soul)." }, { q: "What is the basic characteristic of a soul as defined in Jain scripture?", a: "Upayog Lakshano Jiva (The capability to know)." }, { q: "What is the difference between Sthävar Jiva and Trasa Jiva?", a: "Sthävar Jiva are immobile (one sense), while Trasa Jiva are mobile (two to five senses)." }, { q: "Name the five categories of Sthävar Jiva (immobile beings).", a: "Prithvikäya, Apkäya, Teukäya, Väyukäya, and Vanaspati-käya." }, { q: "What is the difference between Pratyek and Sädhäran Vanaspati-käya?", a: "Pratyek: one soul per cell. Sädhäran: infinite souls per cell (also called Anant-käya)." }, { q: "A worm is an example of which type of Trasa Jiva?", a: "Beindriya (Two-sensed)." }, { q: "A spider is an example of which type of Trasa Jiva?", a: "Chaurindriya (Four-sensed)." }, { q: "What is the term for a five-sensed being that possesses the capacity for rational thinking?", a: "Sangni Panchendriya." }, { q: "What is the name for the bio-potential power (Paryäpti) that allows a being to form a body?", a: "Sharir Paryäpti." }, { q: "How many Paryäptis does a one-sensed (Ekendriya) being have?", a: "Four." }, { q: "How many Prän (vitalities) does a three-sensed (Teindriya) being have?", a: "Seven." }, { q: "Which of the ten vitalities is only possessed by Sangni Panchendriya beings?", a: "Mano-bal (Mind vitality)." }, { q: "What are the four realms of life, or Gati, where a soul can be reborn?", a: "Manushya, Dev, Tiryancha, and Näraki Gati." }, { q: "From which Gati is it possible to attain Moksh (liberation)?", a: "Manushya Gati (Human beings)." }, { q: "Being deceptive and selfish is likely to lead to rebirth in which Gati?", a: "Tiryancha Gati." }, { q: "What is the term for a plant body that contains an infinite number of souls, such as a potato?", a: "Sädhäran Vanaspati-käya or Anant-käya." } ];
            
            // --- UI Builders & Event Handlers ---
            const tabs = document.querySelectorAll('#tabs .tab-link');
            const panes = document.querySelectorAll('#tab-content .tab-pane');
            tabs.forEach(tab => { tab.addEventListener('click', e => { e.preventDefault(); tabs.forEach(t => { t.classList.remove('active', 'bg-blue-600', 'text-white', 'rounded-full', 'shadow-md'); t.classList.add('text-blue-700'); }); panes.forEach(p => p.classList.add('hidden')); tab.classList.remove('text-blue-700'); tab.classList.add('active', 'bg-blue-600', 'text-white', 'rounded-full', 'shadow-md'); document.getElementById(tab.dataset.tab).classList.remove('hidden'); }); });
            
            document.getElementById('tab-content').addEventListener('click', e => {
                const qaButton = e.target.closest('.qa-question-btn');
                const flashcard = e.target.closest('.flashcard');
                const mindmapToggle = e.target.closest('[data-toggle="mindmap"]');
                
                if(flashcard) { flashcard.classList.toggle('is-flipped'); }
                if (qaButton) { const answer = qaButton.nextElementSibling; const text = qaButton.querySelector('span:last-child'); const isOpening = !answer.style.maxHeight || answer.style.maxHeight === '0px'; answer.style.maxHeight = isOpening ? answer.querySelector('p').scrollHeight + 'px' : '0px'; text.textContent = isOpening ? 'Hide Answer' : 'Show Answer'; }
                if(mindmapToggle) { const children = mindmapToggle.nextElementSibling; const icon = mindmapToggle.querySelector('.mindmap-icon'); if (children) { children.classList.toggle('expanded'); icon.textContent = children.classList.contains('expanded') ? '[-]' : '[+]'; } }
            });

            document.getElementById('expand-all-btn')?.addEventListener('click', () => {
                document.querySelectorAll('#mindmap-chart-container .mindmap-children').forEach(el => el.classList.add('expanded'));
                document.querySelectorAll('#mindmap-chart-container .mindmap-icon').forEach(icon => icon.textContent = '[-]');
            });
            document.getElementById('collapse-all-btn')?.addEventListener('click', () => {
                const rootChildren = document.querySelector('#mindmap-chart-container > .mindmap-node > .mindmap-children');
                document.querySelectorAll('#mindmap-chart-container .mindmap-children').forEach(el => el.classList.remove('expanded'));
                document.querySelectorAll('#mindmap-chart-container .mindmap-icon').forEach(icon => icon.textContent = '[+]');
                // Keep the first level expanded for better UX
                if(rootChildren) {
                    rootChildren.classList.add('expanded');
                    rootChildren.previousElementSibling.querySelector('.mindmap-icon').textContent = '[-]';
                }
            });

            function createDynamicFlashcards(containerId, dataArray, frontKey, backKey, cardHeightClass, gridClasses) { const container = document.getElementById(containerId); if (!container) return; container.innerHTML = ''; container.className = gridClasses; dataArray.forEach(item => { container.innerHTML += `<div class="flashcard-container ${cardHeightClass}"><div class="flashcard w-full h-full cursor-pointer"><div class="flashcard-face bg-blue-500 text-white font-semibold"><p>${item[frontKey]}</p></div><div class="flashcard-back bg-blue-700 text-white"><p>${item[backKey]}</p></div></div></div>`; }); }
            createDynamicFlashcards('ajiva-dravya-cards', ajivaDravya, 'term', 'def', 'h-28', 'grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4');
            createDynamicFlashcards('sthavar-jiva-cards', sthavarJiva, 'term', 'def', 'h-28', 'grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4');
            createDynamicFlashcards('trasa-jiva-cards', trasaJiva, 'term', 'def', 'h-32', 'grid grid-cols-2 md:grid-cols-4 gap-4');
            
            function setupQuizB4() {
                const qaContainer = document.getElementById('qa-list-b4'); const flashcardSection = document.getElementById('quiz-flashcard-section-b4'); const qaSection = document.getElementById('quiz-qa-section-b4'); let currentIndex = 0; if (!qaContainer) return; qaContainer.innerHTML = ''; quizDataB4.forEach((item, index) => { qaContainer.innerHTML += `<div class="qa-item border-b border-blue-200"><button class="qa-question-btn w-full text-left p-4 hover:bg-blue-50 flex justify-between items-center"><span class="font-semibold">${index + 1}. ${item.q}</span><span class="text-blue-500 text-sm font-bold">Show Answer</span></button><div class="qa-answer bg-green-50/50 border-t border-green-200"><p class="text-green-800 p-4">${item.a}</p></div></div>`; });
                function updateFlashcard() { const card = document.getElementById('quiz-flashcard-b4'); const front = document.getElementById('quiz-card-front-b4'); const back = document.getElementById('quiz-card-back-b4'); const counter = document.getElementById('quiz-counter-b4'); const prevBtn = document.getElementById('quiz-prev-btn-b4'); const nextBtn = document.getElementById('quiz-next-btn-b4'); card.classList.remove('is-flipped'); setTimeout(() => { front.innerHTML = `<p class="text-xl">${quizDataB4[currentIndex].q}</p>`; back.innerHTML = `<p class="text-lg font-semibold">${quizDataB4[currentIndex].a}</p>`; counter.textContent = `${currentIndex + 1} / ${quizDataB4.length}`; }, 150); prevBtn.disabled = currentIndex === 0; nextBtn.disabled = currentIndex === quizDataB4.length - 1; }
                document.getElementById('show-qa-btn-b4').addEventListener('click', function() { this.classList.replace('inactive-quiz-btn', 'active-quiz-btn'); document.getElementById('show-flashcard-btn-b4').classList.replace('active-quiz-btn', 'inactive-quiz-btn'); qaSection.classList.remove('hidden'); flashcardSection.classList.add('hidden'); });
                document.getElementById('show-flashcard-btn-b4').addEventListener('click', function() { this.classList.replace('inactive-quiz-btn', 'active-quiz-btn'); document.getElementById('show-qa-btn-b4').classList.replace('active-quiz-btn', 'inactive-quiz-btn'); qaSection.classList.add('hidden'); flashcardSection.classList.remove('hidden'); updateFlashcard(); });
                document.getElementById('quiz-flashcard-b4').addEventListener('click', (e) => e.currentTarget.classList.toggle('is-flipped'));
                document.getElementById('quiz-next-btn-b4').addEventListener('click', () => { if(currentIndex < quizDataB4.length - 1) { currentIndex++; updateFlashcard(); } });
                document.getElementById('quiz-prev-btn-b4').addEventListener('click', () => { if(currentIndex > 0) { currentIndex--; updateFlashcard(); } });
            }
            setupQuizB4();
        });
    </script>
    <script src="./js/main.js"></script>
</body>
</html>
