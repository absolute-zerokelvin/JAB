<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Story of Vajrakum√§r</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #374151;
            line-height: 1.6;
        }

        /* --- Tab Styles --- */
        .tabs-container {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            background-color: #ffffff;
            padding: 0.5rem;
            border-radius: 9999px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            color: #4b5563;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            outline: none;
            border: none;
            white-space: nowrap;
        }

        .tab-button.active {
            background-color: #047857;
            color: #ffffff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tab-button:hover:not(.active) {
            background-color: #e0e7ff;
            color: #047857;
        }

        .tab-content {
            display: none;
            padding: 1.5rem;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .tab-content.active {
            display: block;
        }

        /* --- Story Enhancement Styles --- */
        .highlight {
            background-color: #fef9c3;
            color: #78350f;
            font-weight: 600;
            padding: 2px 5px;
            border-radius: 4px;
        }

        .story-icon {
            display: inline-block;
            width: 1.2em;
            height: 1.2em;
            vertical-align: -0.25em;
            margin-right: 0.25em;
            fill: currentColor;
        }
        
        .story-section-divider {
            border: 0;
            height: 2px;
            background-image: linear-gradient(to right, rgba(4, 120, 87, 0), rgba(4, 120, 87, 0.75), rgba(4, 120, 87, 0));
            margin: 2.5rem auto;
        }

        /* --- Graphics Tab Styles --- */
        .graphic-novel-panel {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }
        .graphic-novel-panel img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background-color: #e5e7eb;
        }
        .graphic-novel-caption {
            padding: 1rem;
            background-color: #ffffff;
            border-top: 1px solid #e5e7eb;
            flex-grow: 1;
        }
        .graphic-novel-caption .dialogue {
            font-style: italic;
            color: #1f2937;
            background-color: #f0fdfa;
            padding: 0.5rem;
            border-left: 3px solid #059669;
            border-radius: 4px;
            margin-top: 0.5rem;
        }

        /* --- Timeline Specific Styles --- */
        .timeline-container {
            position: relative;
            max-width: 100%;
            margin: 0 auto;
            padding: 20px 0;
        }

        .timeline-container::after {
            content: '';
            position: absolute;
            width: 4px;
            background-color: #059669;
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -2px;
            z-index: 0;
            border-radius: 9999px;
        }

        .timeline-event {
            padding: 20px 30px;
            position: relative;
            background-color: inherit;
            width: 50%;
            margin-bottom: 30px;
            box-sizing: border-box;
            z-index: 1;
        }

        .timeline-event.left { left: 0; padding-right: 60px; }
        .timeline-event.right { left: 50%; padding-left: 60px; }

        .timeline-event::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #059669;
            border: 4px solid #047857;
            top: 20px;
            border-radius: 50%;
            z-index: 1;
        }

        .timeline-event.left::after { right: -10px; transform: translateX(50%); }
        .timeline-event.right::after { left: -10px; transform: translateX(-50%); }

        .timeline-content {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .timeline-event.left .timeline-content::before {
            content: ''; position: absolute; top: 25px; right: -15px;
            border-width: 15px 0 15px 15px; border-style: solid;
            border-color: transparent transparent transparent #ffffff;
        }

        .timeline-event.right .timeline-content::before {
            content: ''; position: absolute; top: 25px; left: -15px;
            border-width: 15px 15px 15px 0; border-style: solid;
            border-color: transparent #ffffff transparent transparent;
        }

        .timeline-era {
            text-align: center; margin: 40px 0; position: relative; z-index: 2;
        }

        .timeline-era h2 {
            background-color: #047857; color: #ffffff; display: inline-block;
            padding: 10px 20px; border-radius: 9999px; font-weight: 700;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* --- Mind Map (v1) Specific Styles --- */
        .mind-map-wrapper { overflow-x: auto; padding-bottom: 1rem; }
        .mind-map-container { display: flex; flex-direction: column; align-items: flex-start; padding: 2rem; min-width: fit-content; }
        .mind-map-node {
            background-color: #ecfdf5; border: 2px solid #059669; border-radius: 8px;
            padding: 0.5rem 1rem; margin: 0.3rem 0; font-weight: 500; text-align: left;
            position: relative; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            width: fit-content; white-space: nowrap; color: #10b981; transition: all 0.2s ease;
        }
        .mind-map-node.main {
            background-color: #047857; color: #ffffff; font-size: 1.5rem;
            padding: 1rem 2rem; border-radius: 9999px; margin-bottom: 1.5rem;
            align-self: center; font-weight: 700;
        }
        .mind-map-sub-branches {
            display: flex; flex-direction: column; align-items: flex-start;
            margin-left: 2rem; padding-left: 0.5rem; border-left: 2px solid #9ca3af;
            margin-top: 0.5rem; margin-bottom: 0.5rem;
        }
        .mind-map-sub-branches.hidden { display: none; }
        .toggle-node { cursor: pointer; }
        .toggle-node .toggle-icon { margin-left: 0.5rem; font-weight: 700; }
        
        /* --- Mind Map (v2) Specific Styles --- */
        .mind-map-wrapper-v2 { overflow-x: auto; padding: 1rem; min-height: 400px; }
        .mind-map-container-v2 { display: flex; align-items: center; min-width: fit-content; position: relative; padding: 20px; }
        .mind-map-node-v2 {
            background-color: #ecfdf5; border: 2px solid #059669; border-radius: 12px;
            padding: 0.75rem 1.25rem; margin: 0.5rem; font-weight: 600; text-align: center;
            position: relative; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            white-space: nowrap; flex-shrink: 0;
        }
        .mind-map-node-v2.main {
            background-color: #047857; color: #ffffff; font-size: 1.5rem;
            padding: 1rem 2rem; border-radius: 9999px; margin-right: 3rem; z-index: 1;
        }
        .main-branches-container { display: flex; align-items: flex-start; position: relative; flex-grow: 1; }
        .branch-group {
            display: flex; flex-direction: column; align-items: center; position: relative;
            flex-shrink: 0; margin: 0 1rem;
        }
        .node-wrapper { display: flex; align-items: center; cursor: pointer; }
        .toggle-icon-v2 { font-size: 1.2rem; font-weight: bold; margin-left: 0.5rem; color: #047857; }
        .sub-branches-v2 {
            display: flex; flex-direction: column; align-items: center;
            margin-top: 0.5rem; position: relative;
        }
        .sub-branches-v2.hidden { display: none; }

        /* --- Quiz Tab Specific Styles --- */
        .quiz-container { padding: 1rem; }
        .quiz-question {
            background-color: #ecfdf5; border: 1px solid #d1fae5; border-radius: 8px;
            padding: 1rem 1.5rem; margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .quiz-question p { font-size: 1.1rem; font-weight: 500; color: #059669; margin-bottom: 0.75rem; }
        .show-answer-btn {
            background-color: #047857; color: white; padding: 0.5rem 1rem; border-radius: 9999px;
            border: none; cursor: pointer; font-size: 0.9rem; transition: background-color 0.2s ease;
            margin-top: 0.5rem;
        }
        .show-answer-btn:hover { background-color: #059669; }
        .quiz-answer {
            margin-top: 0.75rem; padding: 0.75rem 1rem; background-color: #d1fae5;
            border-left: 4px solid #047857; border-radius: 4px; font-weight: 600;
            color: #047857; display: none;
        }

        /* Responsive design */
        @media screen and (max-width: 768px) {
            .timeline-container::after { left: 20px; margin-left: 0; }
            .timeline-event { width: 100%; padding-left: 60px; padding-right: 15px; left: 0 !important; }
            .timeline-event.left::after, .timeline-event.right::after { left: 10px; transform: translateX(0); }
            .timeline-event.left .timeline-content::before, .timeline-event.right .timeline-content::before {
                left: 45px; border-width: 15px 15px 15px 0; border-color: transparent #ffffff transparent transparent;
            }
            .tabs-container { flex-wrap: wrap; padding: 0.25rem; gap: 0.5rem; }
            .tab-button { padding: 0.5rem 1rem; font-size: 0.875rem; }
            .mind-map-wrapper, .mind-map-wrapper-v2 { overflow-x: auto; }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <header class="bg-emerald-700 text-white p-6 text-center shadow-lg rounded-b-xl mb-8">
        <h1 class="text-4xl font-bold mb-2">The Story of Vajrakum√§r</h1>
        <p class="text-emerald-200 text-lg">Section I.1 from JAB Manual 5th edition 2024</p>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="tabs-container">
            <button class="tab-button active" onclick="openTab(event, 'original-story')">The Story</button>
            <button class="tab-button" onclick="openTab(event, 'timeline-tab')">Timeline</button>
            <button class="tab-button" onclick="openTab(event, 'mindmap-v1-tab')">Mind Map (v1)</button>
            <button class="tab-button" onclick="openTab(event, 'mindmap-v2-tab')">Mind Map (v2)</button>
            <button class="tab-button" onclick="openTab(event, 'graphics-tab')">Graphics</button>
            <button class="tab-button" onclick="openTab(event, 'characters-tab')">Characters</button>
            <button class="tab-button" onclick="openTab(event, 'quiz-tab')">Quiz</button>
        </div>

        <!-- Story Tab Content -->
        <div id="original-story" class="tab-content active text-justify">
            <div class="prose max-w-none">
                <p>
                    <svg class="story-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 10.707V18a1 1 0 01-1 1H4a1 1 0 01-1-1V10.707a1 1 0 01.293-.707l7-7zM10 12a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg>
                    In the city of <span class="highlight">Tumbivan</span>, a rich Brahmin named <span class="highlight">Dhangiri</span> and his beautiful wife <span class="highlight">Sunand√§</span> lived a joyful life. When Sunand√§ became pregnant, she had a wonderful dream that her husband, a scholar, said meant she would have a bright and charming child.
                </p>
                <p>
                    One day, a Jain √Ñch√§rya named <span class="highlight">Singhiri</span> arrived. His sermons deeply moved Dhangiri, who lost interest in worldly life and decided to become a monk. Despite his wife's shock and pleas to stay for their coming child, Dhangiri's mind was made up. He made financial arrangements for his family, and Sunand√§, understanding religion deeply, accepted his decision.
                </p>
                <hr class="story-section-divider">
                <p>
                    A few months later, Sunand√§ gave birth to a handsome, smiling boy. But her happiness was short-lived. One day, a neighbor remarked how much more extravagantly Dhangiri would have celebrated the birth if he hadn't taken Diksh√§.
                </p>
                <p>
                    <svg class="story-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a6 6 0 00-6 6c0 1.887-.454 3.665-1.257 5.234a.75.75 0 00.635 1.016H16.62a.75.75 0 00.635-1.016A14.47 14.47 0 0116 8a6 6 0 00-6-6z" /><path d="M10 18a2.5 2.5 0 002.5-2.5h-5A2.5 2.5 0 0010 18z" /></svg>
                    The baby heard the word <span class="highlight">‚ÄúDiksh√§‚Äù</span> and suddenly remembered his past life. He realized he was on a spiritual path and decided he must become a monk like his father. Knowing his mother wouldn't let him go, he devised a plan: <span class="highlight">he would cry constantly</span> until she got tired of him. His plan worked perfectly. The constant crying exhausted his mother and the neighbors.
                </p>
                <p>
                    When the child was six months old, his father, now <span class="highlight">Muni Dhangiri</span>, visited the city with √Ñch√§rya Singhiri. Fed up, Sunand√§ decided to give the child to his father. The √Ñch√§rya, who had special powers, had already told Muni Dhangiri to accept any "live thing" offered as alms that day.
                </p>
                <hr class="story-section-divider">
                <p>
                    When Muni Dhangiri arrived at his old home for alms, the baby started crying loudly. Sunand√§, at her wit's end, begged him, "Please accept him so there will be peace in this house." Muni Dhangiri warned her, "Once you give him away, you will not be able to get him back." But she insisted.
                </p>
                <p>
                    She placed the child in the muni's cloth bag. Instantly, <span class="highlight">the boy stopped crying and started smiling</span>. Surprised but determined, Sunand√§ watched them leave. At the Up√§shray, the √Ñch√§rya saw the heavy bag and the handsome, smiling boy inside. Because he was so heavy, the √Ñch√§rya named him <span class="highlight">‚ÄúVajrakum√§r.‚Äù</span> He was given to a prominent Jain family to be raised with religious teachings.
                </p>
                <p>
                    Vajrakum√§r was a brilliant child. By age three, he had memorized eleven Anga √Ñgams. One day, a friend told Sunand√§ how lovable and happy her son was. Her motherly love returned, and she deeply regretted her decision.
                </p>
                <hr class="story-section-divider">
                <p>
                    Sunand√§ went to get her son back, but the monks refused. Desperate, she appealed to the <span class="highlight">king</span>. The king, after hearing the full story, arranged a test in his courthouse. He told Sunand√§, "I will let Vajrakum√§r decide whom he wants to go with."
                </p>
                <p>
                    <svg class="story-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M6.25 6.25a.75.75 0 000 1.5h7.5a.75.75 0 000-1.5h-7.5z" /><path fill-rule="evenodd" d="M3.5 3A2.5 2.5 0 001 5.5v2.75a.75.75 0 001.5 0V5.5a1 1 0 011-1h11a1 1 0 011 1v2.75a.75.75 0 001.5 0V5.5A2.5 2.5 0 0016.5 3h-13z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M4.5 10.25a.75.75 0 00-.75.75v3a.75.75 0 00.75.75h2a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-2zm3.25.75a.75.75 0 01.75-.75h2a.75.75 0 01.75.75v3a.75.75 0 01-.75.75h-2a.75.75 0 01-.75-.75v-3zm3.25-.75a.75.75 0 00-.75.75v3a.75.75 0 00.75.75h2a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-2z" clip-rule="evenodd" /></svg>
                    The next day, the court was full. Sunand√§ brought toys, sweets, and clothes to tempt her son. On the other side, Muni Dhangiri had only an <span class="highlight">Ogho</span> (a monk's broom). The king explained the choice to Vajrakum√§r. The young boy looked at his mother's gifts, then at his father's broom. He walked over, picked up the Ogho, and began to dance with joy.
                </p>
                <p>
                    Everyone was amazed. Sunand√§ accepted his decision, and Vajrakum√§r's Diksh√§ was celebrated with joy. He later became a great √Ñch√§rya.
                </p>
            </div>
        </div>

        <!-- Timeline Tab Content -->
        <div id="timeline-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Timeline of Events</h2>
            <div id="timeline" class="timeline-container"></div>
        </div>
        
        <!-- Mind Map v1 Tab Content -->
        <div id="mindmap-v1-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Interactive Mind Map (Vertical)</h2>
            <div id="mindmap-v1-container" class="mind-map-wrapper"></div>
        </div>
        
        <!-- Mind Map v2 Tab Content -->
        <div id="mindmap-v2-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Interactive Mind Map (Horizontal)</h2>
            <div id="mindmap-v2-container" class="mind-map-wrapper-v2"></div>
        </div>
        
        <!-- Graphics Tab Content -->
        <div id="graphics-tab" class="tab-content">
             <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Graphic Novel</h2>
             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Panel 1: The Plan -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/e0f2fe/1e40af?text=Baby+Vajrakum√§r+crying" alt="Baby Vajrakum√§r crying loudly in his crib.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">The Divine Plan</p>
                        <p class="text-sm">Remembering his past life, the infant Vajrakum√§r knows he must become a monk. He decides to cry constantly so his mother will let him go.</p>
                    </div>
                </div>
                <!-- Panel 2: The Offering -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/fff7ed/c2410c?text=Sunand√§+gives+baby" alt="A tired Sunand√§ hands her baby to Muni Dhangiri.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">A Mother's Plea</p>
                        <p class="text-sm">Exhausted, Sunand√§ offers her crying child as alms to his father, Muni Dhangiri.</p>
                        <p class="dialogue">Sunand√§: "Please accept him so there will be peace in this house!"</p>
                    </div>
                </div>
                <!-- Panel 3: The Smile -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/f0fdf4/059669?text=Baby+smiles+at+Monk" alt="The baby instantly stops crying and smiles at his father, the monk.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">A Sudden Change</p>
                        <p class="text-sm">As soon as he is in his father's arms, the baby stops crying and smiles, revealing his true nature. Sunand√§ is stunned.</p>
                    </div>
                </div>
                <!-- Panel 4: The Regret -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/fef2f2/b91c1c?text=Sunand√§+pleads+with+King" alt="A regretful Sunand√§ pleads her case before the king on his throne.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">The Appeal</p>
                        <p class="text-sm">Years later, Sunand√§ learns her son is a happy, brilliant child and desperately wants him back. She goes to the king for help.</p>
                         <p class="dialogue">Sunand√§: "Please, help me get my son back. I cannot live without him."</p>
                    </div>
                </div>
                <!-- Panel 5: The Choice -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/f5f3ff/6d28d9?text=Vajrakum√§r+chooses+Ogho" alt="In the courthouse, young Vajrakum√§r turns away from toys and reaches for the monk's broom (Ogho).">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">The Courthouse Test</p>
                        <p class="text-sm">The king lets Vajrakum√§r choose his destiny. He ignores the toys and sweets from his mother and joyfully picks up the monk's simple broom.</p>
                    </div>
                </div>
                 <!-- Panel 6: The Acharya -->
                <div class="graphic-novel-panel">
                    <img src="https://placehold.co/600x400/fffbeb/d97706?text=Vajrakum√§r+as+an+√Ñch√§rya" alt="A wise and serene √Ñch√§rya Vajrakum√§r teaching his followers.">
                    <div class="graphic-novel-caption">
                        <p class="font-semibold">A Great Teacher</p>
                        <p class="text-sm">Having chosen his path, Vajrakum√§r's Diksh√§ is celebrated. He fulfills his destiny and becomes a great and respected √Ñch√§rya.</p>
                    </div>
                </div>
             </div>
        </div>

        <!-- Characters Tab Content -->
        <div id="characters-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Cast of Characters</h2>
            <div id="characters" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>
        
        <!-- Quiz Tab Content -->
        <div id="quiz-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-center text-emerald-700 mb-6">Test Your Knowledge!</h2>
            <div id="quiz-container" class="quiz-container"></div>
        </div>

    </main>

    <footer class="bg-emerald-700 text-white text-center p-4 mt-12 rounded-t-xl">
        <p>&copy; 2025 AI Story Generator. All rights reserved.</p>
    </footer>

    <script>
        // --- DATA PLACEHOLDERS ---
        const timelineData = [{"era":"Early Life and Father's Renunciation","period":"Before Vajrakum√§r's birth","events":[{"title":"Dhangiri's Life","description":"A rich Brahmin named Dhangiri lived happily with his wife Sunand√§ in the city of Tumbivan.","characters":["Dhangiri","Sunand√§"]},{"title":"Spiritual Awakening","description":"Dhangiri and Sunand√§ listen to sermons from √Ñch√§rya Singhiri, which awakens Dhangiri's soul and makes him decide to become a monk.","characters":["Dhangiri","Sunand√§","√Ñch√§rya Singhiri"]},{"title":"Dhangiri Takes Diksh√§","description":"Despite Sunand√§ being pregnant, Dhangiri renounces his worldly life to become a monk, after making financial arrangements for his family.","characters":["Dhangiri","Sunand√§"]}]},{"era":"Vajrakum√§r's Birth and Plan","period":"First 6 months of Vajrakum√§r's life","events":[{"title":"Birth of Vajrakum√§r","description":"Sunand√§ gives birth to a very handsome and lovable boy.","characters":["Sunand√§","Vajrakum√§r"]},{"title":"Past Life Remembrance","description":"As a baby, hearing the word 'Diksh√§' triggers a memory of his past life, and he decides he must also become a monk.","characters":["Vajrakum√§r"]},{"title":"The Crying Plan","description":"Realizing his mother won't let him go, he decides to cry incessantly to make her give him up.","characters":["Vajrakum√§r","Sunand√§"]}]},{"era":"A Monk's Life Begins","period":"At 6 months old","events":[{"title":"Offered as Alms","description":"Fed up with the crying, Sunand√§ offers her son as alms to his father, Muni Dhangiri, when he visits.","characters":["Sunand√§","Muni Dhangiri","Vajrakum√§r"]},{"title":"Accepted by Father","description":"Remembering his guru's words, Muni Dhangiri accepts the child after warning Sunand√§ of the finality of her decision.","characters":["Muni Dhangiri","Sunand√§","√Ñch√§rya Singhiri"]},{"title":"Named Vajrakum√§r","description":"The baby stops crying instantly. At the Up√§shray, √Ñch√§rya Singhiri names him 'Vajrakum√§r' because he was so heavy.","characters":["Vajrakum√§r","√Ñch√§rya Singhiri","Muni Dhangiri"]},{"title":"Raised by Shr√§vak","description":"He is placed in the care of a prominent Jain shr√§vak to be taught religious teachings, and he learns the eleven Anga √Ñgams by age three.","characters":["Vajrakum√§r","√Ñch√§rya Singhiri","Shr√§vak"]}]},{"era":"The Mother's Regret and The King's Court","period":"A few years later","events":[{"title":"Sunand√§'s Regret","description":"Sunand√§ learns her son is a charming and happy child and desperately wants him back.","characters":["Sunand√§","Vajrakum√§r"]},{"title":"Appeal to the King","description":"After the monks refuse to return him, Sunand√§ goes to the king for help.","characters":["Sunand√§","The King"]},{"title":"The King's Decision","description":"The king decides to let Vajrakum√§r choose his own path in a courthouse assembly.","characters":["The King","Sunand√§","Vajrakum√§r"]},{"title":"The Final Choice","description":"In court, presented with his mother's toys and his father's Ogho (broom), Vajrakum√§r joyfully chooses the Ogho, signifying his desire for monkhood.","characters":["Vajrakum√§r","The King","Sunand√§","Muni Dhangiri"]}]}]
        const charactersData = [{"name":"Vajrakum√§r","description":"The central character, born as a Brahmin who remembers his past life and chooses the path of a monk from infancy."},{"name":"Dhangiri","description":"Vajrakum√§r's father, a rich Brahmin who becomes a Jain monk (Muni Dhangiri) after being inspired by sermons."},{"name":"Sunand√§","description":"Vajrakum√§r's mother, who initially gives him away due to his crying but later regrets it and tries to get him back."},{"name":"√Ñch√§rya Singhiri","description":"The Jain √Ñch√§rya whose sermons inspire Dhangiri and who names the baby Vajrakum√§r."},{"name":"The King","description":"The ruler of Tumbivan who is asked to mediate the dispute and wisely decides to let Vajrakum√§r choose his own destiny."},{"name":"Jain Shr√§vak & his wife","description":"The devout Jain family that raises Vajrakum√§r after he is given away, ensuring he receives religious education."}]
        const quizData = [{"question":"What was the name of Vajrakum√§r's father?","answer":"Dhangiri"},{"question":"Who was the Jain √Ñch√§rya that inspired Dhangiri to become a monk?","answer":"√Ñch√§rya Singhiri"},{"question":"What did Vajrakum√§r do to convince his mother to give him away?","answer":"He cried constantly."},{"question":"How old was Vajrakum√§r when his mother gave him to his father?","answer":"Six months old."},{"question":"Why did √Ñch√§rya Singhiri name the baby 'Vajrakum√§r'?","answer":"Because he was very heavy ('Vajra' implies strength/heaviness)."},{"question":"How many Anga √Ñgams had Vajrakum√§r learned by the age of three?","answer":"Eleven."},{"question":"Who did Sunand√§ go to for help to get her son back?","answer":"The king."},{"question":"What two choices was Vajrakum√§r presented with in the king's court?","answer":"His mother's toys/sweets and his father's Ogho (monk's broom)."},{"question":"What item did Vajrakum√§r choose in the courthouse?","answer":"The Ogho."},{"question":"What did Sunand√§ do after Vajrakum√§r made his choice?","answer":"She accepted his decision and celebrated his Diksh√§ (initiation as a monk)."}]
        const mindmapV1Data = {"name":"The Story of Vajrakum√§r","children":[{"name":"Family and Birth","children":[{"name":"Parents: Dhangiri & Sunand√§"},{"name":"Father (Dhangiri) becomes a monk"},{"name":"Vajrakum√§r is born"}]},{"name":"The Divine Plan","children":[{"name":"Remembers Past Life","children":[{"name":"Hears the word 'Diksh√§'"}]},{"name":"Decides to become a monk"},{"name":"Creates the 'Crying Plan'"}]},{"name":"Path to Monkhood","children":[{"name":"Given away as alms at 6 months"},{"name":"Named 'Vajrakum√§r' by √Ñch√§rya Singhiri"},{"name":"Raised by a Jain Shr√§vak"},{"name":"Learns 11 Anga √Ñgams by age 3"}]},{"name":"The Final Test","children":[{"name":"Mother (Sunand√§) wants him back"},{"name":"Appeals to the King"},{"name":"The Courthouse Trial","children":[{"name":"Choice: Worldly toys vs. Monk's Ogho"},{"name":"Vajrakum√§r chooses the Ogho"}]},{"name":"Becomes a great √Ñch√§rya"}]}]}
        const mindmapV2Data = {"name":"Vajrakum√§r's Journey","children":[{"name":"Origins","children":[{"name":"Born to Dhangiri & Sunand√§"},{"name":"Father's Renunciation"}]},{"name":"The Plan","children":[{"name":"Remembers Past Life"},{"name":"Cries to be given away"}]},{"name":"Monkhood","children":[{"name":"Given as Alms"},{"name":"Named Vajrakum√§r"},{"name":"Learns scriptures"}]},{"name":"The Choice","children":[{"name":"Mother's Regret"},{"name":"King's Court Trial"},{"name":"Chooses Monk's Life"}]}]}

        // --- Tab Functionality ---
        function openTab(evt, tabName) {
            let i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = "none"; }
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(" active", ""); }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }
        
        // --- DYNAMIC CONTENT GENERATION ---
        document.addEventListener('DOMContentLoaded', () => {

            // Generate Timeline
            const generateTimeline = () => {
                const timelineDiv = document.getElementById('timeline');
                if (!timelineDiv || !timelineData.length) return;
                timelineDiv.innerHTML = '';
                let isLeft = true;
                timelineData.forEach(era => {
                    const eraHeading = document.createElement('div');
                    eraHeading.className = 'timeline-era';
                    eraHeading.innerHTML = `<h2 class="text-xl md:text-2xl">${era.era}<br><span class="text-sm font-normal">${era.period}</span></h2>`;
                    timelineDiv.appendChild(eraHeading);
                    if (era.events) era.events.forEach(event => {
                        const eventDiv = document.createElement('div');
                        eventDiv.className = `timeline-event ${isLeft ? 'left' : 'right'}`;
                        isLeft = !isLeft;
                        const charactersHtml = event.characters?.length ? `<p class="text-sm text-gray-600 mt-2"><strong>Characters:</strong> ${event.characters.join(', ')}</p>` : '';
                        eventDiv.innerHTML = `<div class="timeline-content"><h3 class="text-xl font-semibold text-emerald-700 mb-2">${event.title}</h3><p>${event.description}</p>${charactersHtml}</div>`;
                        timelineDiv.appendChild(eventDiv);
                    });
                });
            };

            // Generate Characters
            const generateCharacters = () => {
                const charactersDiv = document.getElementById('characters');
                if (!charactersDiv || !charactersData.length) return;
                charactersDiv.innerHTML = '';
                charactersData.forEach(character => {
                    const card = document.createElement('div');
                    card.className = 'bg-gray-50 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300';
                    card.innerHTML = `<h3 class="text-xl font-bold text-emerald-800 mb-2">${character.name}</h3><p class="text-gray-700 text-sm">${character.description}</p>`;
                    charactersDiv.appendChild(card);
                });
            };

            // Generate Quiz
            const generateQuiz = () => {
                const quizContainer = document.getElementById('quiz-container');
                if (!quizContainer || !quizData.length) return;
                quizContainer.innerHTML = '';
                quizData.forEach((item, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question';
                    questionDiv.innerHTML = `<p>${index + 1}. ${item.question}</p><button class="show-answer-btn" onclick="toggleAnswer(this)">Show Answer</button><div class="quiz-answer">${item.answer}</div>`;
                    quizContainer.appendChild(questionDiv);
                });
            };
            
            // Generate Mind Map v1 (Vertical)
            const generateMindmapV1 = () => {
                const container = document.getElementById('mindmap-v1-container');
                if (!container || !mindmapV1Data?.name) return;
                container.innerHTML = '';
                const mapContainer = document.createElement('div');
                mapContainer.className = 'mind-map-container';
                
                function createNodeV1(item) {
                    const nodeGroup = document.createElement('div');
                    const node = document.createElement('div');
                    node.className = 'mind-map-node';
                    node.textContent = item.name;
                    
                    if (item.children && item.children.length > 0) {
                        node.classList.add('toggle-node');
                        node.innerHTML = `${item.name} <span class="toggle-icon">+</span>`;
                        const subBranches = document.createElement('div');
                        subBranches.className = 'mind-map-sub-branches hidden';
                        item.children.forEach(child => subBranches.appendChild(createNodeV1(child)));
                        nodeGroup.appendChild(node);
                        nodeGroup.appendChild(subBranches);
                        
                        node.addEventListener('click', () => {
                            subBranches.classList.toggle('hidden');
                            node.querySelector('.toggle-icon').textContent = subBranches.classList.contains('hidden') ? '+' : '-';
                        });
                    } else {
                        nodeGroup.appendChild(node);
                    }
                    return nodeGroup;
                }

                const mainNode = document.createElement('div');
                mainNode.className = 'mind-map-node main';
                mainNode.textContent = mindmapV1Data.name;
                mapContainer.appendChild(mainNode);
                
                if (mindmapV1Data.children) {
                    const mainBranches = document.createElement('div');
                    mindmapV1Data.children.forEach(child => mainBranches.appendChild(createNodeV1(child)));
                    mapContainer.appendChild(mainBranches);
                }
                container.appendChild(mapContainer);
            };

            // Generate Mind Map v2 (Horizontal)
            const generateMindmapV2 = () => {
                const container = document.getElementById('mindmap-v2-container');
                if (!container || !mindmapV2Data?.name) return;
                container.innerHTML = '';
                const mapContainer = document.createElement('div');
                mapContainer.className = 'mind-map-container-v2';
                
                function createNodeV2(item) {
                    const branchGroup = document.createElement('div');
                    branchGroup.className = 'branch-group';
                    const nodeWrapper = document.createElement('div');
                    nodeWrapper.className = 'node-wrapper';

                    const node = document.createElement('div');
                    node.className = 'mind-map-node-v2';
                    node.textContent = item.name;
                    nodeWrapper.appendChild(node);
                    branchGroup.appendChild(nodeWrapper);

                    if (item.children && item.children.length > 0) {
                        const toggleIcon = document.createElement('span');
                        toggleIcon.className = 'toggle-icon-v2';
                        toggleIcon.textContent = '+';
                        nodeWrapper.appendChild(toggleIcon);

                        const subBranches = document.createElement('div');
                        subBranches.className = 'sub-branches-v2 hidden';
                        item.children.forEach(child => subBranches.appendChild(createNodeV2(child)));
                        branchGroup.appendChild(subBranches);

                        nodeWrapper.addEventListener('click', () => {
                            subBranches.classList.toggle('hidden');
                            toggleIcon.textContent = subBranches.classList.contains('hidden') ? '+' : '-';
                        });
                    }
                    return branchGroup;
                }

                const mainNode = document.createElement('div');
                mainNode.className = 'mind-map-node-v2 main';
                mainNode.textContent = mindmapV2Data.name;
                mapContainer.appendChild(mainNode);
                
                if (mindmapV2Data.children) {
                    const mainBranchesContainer = document.createElement('div');
                    mainBranchesContainer.className = 'main-branches-container';
                    mindmapV2Data.children.forEach(child => mainBranchesContainer.appendChild(createNodeV2(child)));
                    mapContainer.appendChild(mainBranchesContainer);
                }
                container.appendChild(mapContainer);
            };

            // --- Quiz Answer Toggle Functionality ---
            window.toggleAnswer = function(button) {
                const answerDiv = button.nextElementSibling;
                if (answerDiv && answerDiv.classList.contains('quiz-answer')) {
                    const isVisible = answerDiv.style.display === 'block';
                    answerDiv.style.display = isVisible ? 'none' : 'block';
                    button.textContent = isVisible ? 'Show Answer' : 'Hide Answer';
                }
            };

            // --- INITIALIZATION ---
            generateTimeline();
            generateCharacters();
            generateQuiz();
            generateMindmapV1();
            generateMindmapV2();

            // Set the initial active tab
            document.querySelector('.tabs-container .tab-button').classList.add('active');
            document.getElementById('original-story').style.display = 'block';
        });
    </script>
</body>
</html>
